<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eastern Shore Auction House</title>
    <style>
        :root { --primary-color: #2563eb; --bg-color: #f3f4f6; --text-color: #1f2937; --header-bg: #111827; }
        body { font-family: -apple-system, system-ui, sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; display: flex; flex-direction: column; min-height: 100vh; }

        /* HEADER */
        .header-strip { background-color: var(--header-bg); color: #9ca3af; padding: 12px 0; text-align: center; font-size: 0.9rem; font-style: italic; letter-spacing: 0.5px; border-bottom: 4px solid var(--primary-color); }
        
        /* MAIN HERO CARD */
        .hero-section { display: flex; justify-content: center; margin-top: 40px; padding: 0 20px; }
        .hero-card { background: white; max-width: 600px; width: 100%; padding: 50px 40px; border-radius: 12px; text-align: center; box-shadow: 0 20px 40px rgba(0,0,0,0.08); }
        .hero-label { font-size: 0.8rem; font-weight: bold; color: #6b7280; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 15px; }
        .hero-date { font-size: 2.2rem; font-weight: 800; color: var(--text-color); margin: 0 0 25px 0; line-height: 1.1; letter-spacing: -0.5px; }
        .hero-text { color: #dc2626; line-height: 1.7; font-size: 1rem; margin-bottom: 30px; font-weight: 500; }
        .signature { font-family: "Georgia", serif; font-style: italic; color: #b91c1c; margin-bottom: 35px; display: block; font-size: 1.1rem; }
        
        .cta-button { display: inline-block; background-color: var(--primary-color); color: white; padding: 16px 32px; border-radius: 30px; font-weight: bold; font-size: 1.1rem; text-decoration: none; transition: transform 0.2s, background 0.2s; box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3); }
        .cta-button:hover { background-color: #1d4ed8; transform: translateY(-2px); }
        
        .helper-text { margin-bottom: 20px; font-size: 1rem; color: #1f2937; }
        .helper-link { color: #5b6676; text-decoration: underline; text-decoration-style: dotted; font-size: 0.85rem; cursor: pointer; display: inline-block; margin-top: 25px; font-weight: bold; }

        /* UPCOMING SECTION */
        .upcoming-section { max-width: 1000px; margin: 80px auto; padding: 0 20px; text-align: center; }
        h2.section-title { font-family: "Georgia", serif; font-size: 2.2rem; color: var(--text-color); margin-bottom: 50px; display: inline-block; font-weight: bold; border-bottom: 2px solid #e5e7eb; padding-bottom: 20px; }
        
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 30px; justify-content: center; }
        
        /* ITEM CARD */
        .item-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); transition: transform 0.2s; cursor: pointer; text-decoration: none; color: inherit; display: flex; flex-direction: column; border: 1px solid #f3f4f6; }
        .item-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
        .card-img { width: 100%; height: 200px; object-fit: cover; background: #eee; }
        .card-body { padding: 20px; text-align: left; }
        .card-lot { font-size: 0.75rem; color: #6b7280; font-weight: bold; text-transform: uppercase; margin-bottom: 5px; letter-spacing: 0.5px; }
        .card-title { font-weight: bold; font-size: 1.1rem; margin-bottom: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: #111827; }
        .card-price { color: #16a34a; font-weight: bold; font-size: 1.1rem; }
        
        .status-badge { float: right; font-size: 0.7rem; padding: 2px 8px; border-radius: 12px; font-weight: bold; }
        .status-live { background: #fee2e2; color: #dc2626; border: 1px solid #fca5a5; }
        .status-sold { background: #fef3c7; color: #b45309; border: 1px solid #fcd34d; }

        .loading-text { color: #9ca3af; font-style: italic; grid-column: 1/-1; padding: 40px; }
        .footer-text { margin-top: 60px; margin-bottom: 40px; color: #9ca3af; font-size: 0.9rem; text-align: center; }

        @media (max-width: 600px) {
            .hero-date { font-size: 1.8rem; }
            .grid-container { grid-template-columns: 1fr 1fr; gap: 15px; }
            .item-card { border-radius: 8px; }
            .card-img { height: 150px; }
        }
    </style>
</head>
<body>

    <div class="header-strip">Baldwin County, Alabama</div>

    <div class="hero-section">
        <div class="hero-card">
            <div class="hero-label">Next Live Auction Begins</div>
            <div class="hero-date">December 11th - 7:30pm</div>
            
            <p class="hero-text">
                Welcome to The Auction House! Registration is officially open. Our first live event is set for Dec 11th, but you can create your account and list items right now. We might even run a small warm-up auction this Sunday, Dec 7th, so get registered today!
            </p>
            
            <span class="signature">— Jamie Rush</span>

            <div class="helper-text">Log in or Create an Account to bid.</div>
            
            <a href="auction.html" class="cta-button">Enter Auction Room</a>
            
            <br>
            <div class="helper-link" onclick="location.href='auction.html'">ℹ️ How This Auction Works</div>
        </div>
    </div>

    <div class="upcoming-section">
        <h2 class="section-title">Upcoming Auctions</h2>
        
        <div id="lotsGrid" class="grid-container">
            <div class="loading-text">Loading lots...</div>
        </div>
        
        <div class="footer-text">Stay tuned! New lots coming soon.</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // --- PASTE YOUR FIREBASE CONFIG HERE ---
        const firebaseConfig = {
          apiKey: "AIzaSyCt0i8a7ZVRlNmSts9yM4uGwV7ghPU59rk",
          authDomain: "eastern-shore-auction.firebaseapp.com",
          databaseURL: "https://eastern-shore-auction-default-rtdb.firebaseio.com",
          projectId: "eastern-shore-auction",
          storageBucket: "eastern-shore-auction.firebasestorage.app",
          messagingSenderId: "771348898846",
          appId: "1:771348898846:web:3b6371e8f826747fdcba0f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Fetch Inventory
        const inventoryRef = ref(db, 'inventory');
        onValue(inventoryRef, (snapshot) => {
            const grid = document.getElementById('lotsGrid');
            grid.innerHTML = ""; 
            
            const data = snapshot.val();
            if (!data) {
                grid.innerHTML = '<div class="loading-text">No upcoming auctions found.</div>';
                return;
            }

            // Convert to array and sort by Lot Number
            const items = Object.values(data).sort((a, b) => a.lot - b.lot);

            items.forEach(item => {
                // Determine Status Badge
                let statusBadge = "";
                if (item.status_label && item.status_label.includes("SOLD")) {
                    statusBadge = `<span class="status-badge status-sold">SOLD</span>`;
                } else if (item.status_label && item.status_label.includes("LIVE")) {
                    statusBadge = `<span class="status-badge status-live">LIVE NOW</span>`;
                }

                // Create Card HTML
                const card = document.createElement('a');
                card.className = 'item-card';
                card.href = 'auction.html'; // Clicking takes them to the live room
                card.innerHTML = `
                    <img src="${item.image_url}" class="card-img" alt="${item.title}" onerror="this.src='https://placehold.co/400x300?text=No+Image'">
                    <div class="card-body">
                        <div class="card-lot">Lot #${item.lot} ${statusBadge}</div>
                        <div class="card-title">${item.title}</div>
                        <div class="card-price">Est: $${item.start_price}</div>
                    </div>
                `;
                grid.appendChild(card);
            });
        });
    </script>

</body>
</html>